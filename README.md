# MySQL
黑马程序员|MySQL数据库入门到精通


# 基础篇笔记

## 一、SQL

### 1. DDL（Data Definition Language）

- #### 数据库操作

	1. 查询所有数据库
		` SHOW DATABASES;`
	1. 查询当前数据库
		`SELECT DATABASE();`
	1. 创建数据库
		`CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT  CHARSET 字符集] [COLLATE 排序规则];`
	1. 删除
		`DROP DATABASE [IF EXISTS] 数据库名;`
	1. 使用数据库
		`USE 数据库名;`




- #### DDL-表操作-查询

	1. 查询当前数据库所有表
		` SHOW TABLES;`
	1. 查询表结构
		`DESC 表名;`
	1. 查询指定表的建表语句
		`SHOW CREATE TABLE 表名;`


- #### DDL-表操作-创建

```sql
create table 表名(
    字段1 字段1类型[comment 字段1注释],
    字段2 字段2类型[comment 字段2注释],
    字段3 字段3类型[comment 字段3注释]
)[comment 表注释];
```

- #### DDL-表操作-数据类型

​	MySQL中数据类型主要分为三类：数值类型、字符串类型、日期时间类型。

1. 数值类型

| 类型         | 大小    | 有符号(SIGNED)范围                                    | 无符号(UNSIGNED)范围                                      | 描述               |
| ------------ | ------- | ----------------------------------------------------- | --------------------------------------------------------- | ------------------ |
| TINYINT      | 1 byte  | (-128，127)                                           | (0，255)                                                  | 小整数值           |
| SMALLINT     | 2 bytes | (-32768，32767)                                       | (0，65535)                                                | 大整数值           |
| MEDIUMINT    | 3 bytes | (-8388608，8388607)                                   | (0，16777215)                                             | 大整数值           |
| INT或INTEGER | 4 bytes | (-2147483648，2147483647)                             | (0，4294967295)                                           | 大整数值           |
| BIGINT       | 8 bytes | (-2^63， 2^63-1)                                      | (0，2^64-1)                                               | 极大整数值         |
| FLOAT        | 4 bytes | (-3.402823466 E+38，3.402823466351 E+38)              | 0 和 (1.175494351 E-38，3.402823466 E+38)                 | 单精度浮点数值     |
| DOUBLE       | 8 bytes | (-1.7976931348623157 E+308，1.7976931348623157 E+308) | 0 和 (2.2250738585072014 E-308，1.7976931348623157 E+308) | 双精度浮点数值     |
| DECIMAL      |         | 依赖于M(精度)和D(标度)的值                            | 依赖于M(精度)和D(标度)的值                                | 小数值(精确定点数) |

2. 字符串类型

| 类型       | 大小                  | 描述                         |
| ---------- | --------------------- | ---------------------------- |
| CHAR       | 0-255 bytes           | 定长字符串                   |
| VARCHAR    | 0-65535 bytes         | 变长字符串                   |
| TINYBLOB   | 0-255 bytes           | 不超过255个字符的二进制数据  |
| TINYTEXT   | 0-255 bytes           | 短文本字符串                 |
| BLOB       | 0-65 535 bytes        | 二进制形式的长文本数据       |
| TEXT       | 0-65 535 bytes        | 长文本数据                   |
| MEDIUMBLOB | 0-16 777 215 bytes    | 二进制形式的中等长度文本数据 |
| MEDIUMTEXT | 0-16 777 215 bytes    | 中等长度文本数据             |
| LONGBLOB   | 0-4 294 967 295 bytes | 二进制形式的极大文本数据     |

3. 日期类型

| 类型      | 大小 | 范围                                       | 格式                | 描述                     |
| --------- | ---- | ------------------------------------------ | ------------------- | ------------------------ |
| DATE      | 3    | 1000-01-01 至 9999-12-31                   | YYYY-MM-DD          | 日期值                   |
| TIME      | 3    | -838:59:59 至 838:59:59                    | HH:MM:SS            | 时间值或持续时间         |
| YEAR      | 1    | 1901 至 2155                               | YYYY                | 年份值                   |
| DATETIME  | 8    | 1000-01-01 00:00:00 至 9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值         |
| TIMESTAMP | 4    | 1970-01-01 00:00:01 至 2038-01-19 03:14:07 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值，时间戳 |

- #### DDL-表操作-修改

	1. 添加字段
		` ALTER TABLE 表名 ADD 字段名 类型（长度） [COMMENT 注释][约束];`

	1. 修改字段（数据类型）
		` ALTER TABLE 表名 MODIFY 字段名 新类型（长度） [COMMENT 注释][约束];`

	1. 修改字段（字段名和字段类型）
		` ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型（长度） [COMMENT 注释][约束];`

	1. 删除字段
		` ALTER TABLE 表名 DROP 字段名;`

	1. 修改表名
		` 	ALTER TABLE 表名 RENAME TO 新报名;`


- #### DDL-表操作-删除

	1. 删除表
		` DROP TABLE[IF EXISTS] 表名;`


	2. 删除指定表，并重新创建该表
		` TRUNCATE TABLE 表名;`




### 2. DML（Data  Manipulation Language）

用来对数据库中表的数据记录进行增删改操作

- #### DML-添加数据

	1. 给指定字段添加数据
		` INSERT INTO 表名（字段名1，字段名2，...） VALUES（值1，值2，...）；` 

	2. 给全部字段添加数据
		` INSERT INTO VALUES（值1，值2，...）；` 

	3. 批量添加数据
		` INSERT INTO 表名（字段名1，字段名2，...） VALUES（值1，值2，...），（值1，值2，...）...；` 
		` INSERT INTO VALUES（值1，值2，...），（值1，值2，...）...；` 

	注意：

	- 插入数据时，指定的字段顺序需要与值的顺序是一一对应的。
	- 字符串和日期数据应该包含在引号中。
	- 插入的数据大小，应该在字段的规定范围内。

- #### DML-修改数据

	` UPDATE 表名 SET 字段名1 = 值1，字段名2 = 值2，...[WHERE 条件];`

	注意：修改语句的条件可以有，也可以没有，如果没有条件，则会修改整张表的所有数据。

- #### DML-删除数据

	` DELETE FROM 表名 [WHERE 条件];`

	注意：

	- DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的数据。
	- DELETE语句不能删除某一个字段的值（可以使用UPDATE，将相应字段置为NULL）

### 3.DQL（Data Query Language）

数据查询语言，用来查询数据库中表的记录。

- #### DQL-语法

```sql
SELECT
		字段列表
FROM
		表名列表
WHERE
		条件列表
GROUP BY
		分组字段列表
HAVING
		分组后条件列表
ORDER BY
		排序字段列表
LIMIT
		分页参数
```

- #### DQL-基本查询

	1. 查询多个字段
		` SELECT 字段1，字段2，... FROM 表名;` 
		` SELECT * FROM 表名;`
	2. 设置别名
		` SELECT 字段1 [AS 别名1]，[AS 别名2]，...FROM 表名;`
	3. 去除重复记录
		` SELECT DISTINCT 字段列表 FROM 表名;`

- #### DQL-条件查询

	1. 语法
		` SELECT 字段列表 FROM 表名 WHERE 条件列表;`
	2. 条件

	| 比较运算符      | 功能                                     |
	| --------------- | ---------------------------------------- |
	| >               | 大于                                     |
	| >=              | 大于等于                                 |
	| <               | 小于                                     |
	| <=              | 小于等于                                 |
	| =               | 等于                                     |
	| <> 或！=        | 不等于                                   |
	| BETWEEN … AND … | 在某个范围内（含最小、最大值）           |
	| IN(…)           | 在in之后的列表中的值，多选一             |
	| LIKE 占位符     | 模糊匹配（_匹配单个字符，%匹配任意字符） |
	| IS NULL         | 是NULL                                   |

	| 逻辑运算符 | 功能                     |
	| ---------- | ------------------------ |
	| AND 或 &&  | 逻辑与（同时成立为真）   |
	| OR 或 \|\| | 逻辑或（一个成立即为真） |
	| NOT 或 ！  | 逻辑非                   |

- #### DQL-聚合函数

	1. 介绍

		将一列数据作为一个整体，进行纵向计算。

	2. 常见聚合函数

		| 函数  | 功能     |
		| ----- | -------- |
		| count | 统计数量 |
		| max   | 最大值   |
		| min   | 最小值   |
		| avg   | 平均值   |
		| sum   | 求和     |

	3. 语法
		` SELECT 聚合函数（字段列表）FROM 表名;`

	- 注意：null不参与所有聚合函数运算。

- #### DQL-分组查询

	1. 语法
		` SELECT 字段列表 FROM 表名 [WHERE 条件列表] GROUP BY 分组字段名 [HAVING 分组后过滤条件];`
	2. where与having区别
		- 执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。
		- 判断条件不同：where不能对聚合函数进行判断，而having可以。

	

	注意：

	- 执行顺序：where > 聚合函数 > having。
	- 分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。

	
